{"title":"Centos上安装配置MYSQL","date":"2018-08-23T13:49:04.000Z","slug":"Centos上安装配置MYSQL","tags":["教程"],"categories":["Linux"],"updated":"2018-08-23T13:53:22.512Z","content":"<h5 id=\"第一步-获取mysql-yum源\"><a href=\"#第一步-获取mysql-yum源\" class=\"headerlink\" title=\"第一步: 获取mysql yum源\"></a>第一步: 获取mysql yum源</h5><p>进入mysql官网获取RPM包的下载地址<br><a href=\"https://dev.mysql.com/downloads/repo/yum/\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/downloads/repo/yum/</a></p>\n<p>点击下载，右键获取到下载链接<br><a href=\"https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</a></p>\n<p>当然，也可以直接将rpm下载到本地。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# rz  //将刚刚下载的文件选中即可。</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"第二步-下载和安装mysql源\"><a href=\"#第二步-下载和安装mysql源\" class=\"headerlink\" title=\"第二步: 下载和安装mysql源\"></a>第二步: 下载和安装mysql源</h5><p>先下载 mysql源安装包<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<p>如果出现问题：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-bash: wget: 未找到命令</span><br></pre></td></tr></table></figure></p>\n<p>安装wget<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install wget</span><br><span class=\"line\">wget https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<p>安装mysql源<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y localinstall mysql57-community-release-el7-11.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"第三步-在线安装Mysql\"><a href=\"#第三步-在线安装Mysql\" class=\"headerlink\" title=\"第三步: 在线安装Mysql\"></a>第三步: 在线安装Mysql</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install mysql-community-server</span><br></pre></td></tr></table></figure>\n<p>如果遇见如下错误：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">没有可用的软件包 mysql-community-server</span><br></pre></td></tr></table></figure>\n<p>没有安装repo源</p>\n<p>需进行如下的处理：</p>\n<p>重复第二步：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh mysql-community-release-el7-5.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<p>查看下：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@master ~]# ls -1 /etc/yum.repos.d/mysql-community*</span><br><span class=\"line\">/etc/yum.repos.d/mysql-community.repo</span><br><span class=\"line\">/etc/yum.repos.d/mysql-community-source.repo</span><br></pre></td></tr></table></figure></p>\n<p>如果出现上面的信息则可以正常安装。</p>\n<h5 id=\"第四步-检测下mysql是否安装\"><a href=\"#第四步-检测下mysql是否安装\" class=\"headerlink\" title=\"第四步: 检测下mysql是否安装\"></a>第四步: 检测下mysql是否安装</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# mysqld --version</span><br><span class=\"line\">mysqld  Ver 5.7.23 for Linux on x86_64 (MySQL Community Server (GPL))</span><br></pre></td></tr></table></figure>\n<p>安装的mysql版本为 5.7.23</p>\n<h5 id=\"第五步：-启动Mysql\"><a href=\"#第五步：-启动Mysql\" class=\"headerlink\" title=\"第五步： 启动Mysql\"></a>第五步： 启动Mysql</h5><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start mysqld</span><br></pre></td></tr></table></figure>\n<p>检测是否启动成功：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# ps aux|grep mysqld</span><br><span class=\"line\">mysql      3415  0.4  9.2 1119500 171628 ?      Sl   16:52   0:00 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\">root       3480  0.0  0.0 112720   984 pts/0    S+   16:54   0:00 grep --color=auto mysqld</span><br></pre></td></tr></table></figure></p>\n<p>如上图，则证明启动成功，pid = 3415</p>\n<p>还可以使用mysql自带的命令行查看状态<code>service mysqld status</code>,active代表存活<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# service mysqld status</span><br><span class=\"line\">Redirecting to /bin/systemctl status mysqld.service</span><br><span class=\"line\">● mysqld.service - MySQL Server</span><br><span class=\"line\">   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)</span><br><span class=\"line\">   Active: active (running) since 一 2018-08-20 16:52:28 CST; 52s ago</span><br><span class=\"line\">     Docs: man:mysqld(8)</span><br><span class=\"line\">           http://dev.mysql.com/doc/refman/en/using-systemd.html</span><br><span class=\"line\">  Process: 3412 ExecStart=/usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS)</span><br><span class=\"line\">  Process: 3334 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)</span><br><span class=\"line\"> Main PID: 3415 (mysqld)</span><br><span class=\"line\">    Tasks: 27</span><br><span class=\"line\">   CGroup: /system.slice/mysqld.service</span><br><span class=\"line\">           └─3415 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br><span class=\"line\"></span><br><span class=\"line\">8月 20 16:52:22 haloo systemd[1]: Starting MySQL Server...</span><br><span class=\"line\">8月 20 16:52:28 haloo systemd[1]: Started MySQL Server.</span><br></pre></td></tr></table></figure></p>\n<p>当然还可以设置为开启启动<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@localhost ~]# systemctl enable mysqld</span><br><span class=\"line\">[root@localhost ~]# systemctl daemon-reload</span><br></pre></td></tr></table></figure></p>\n<h5 id=\"第六步：-修改密码\"><a href=\"#第六步：-修改密码\" class=\"headerlink\" title=\"第六步： 修改密码\"></a>第六步： 修改密码</h5><p>mysql安装完成之后，在/var/log/mysqld.log文件中给root生成了一个临时的默认密码。<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# vim /var/log/mysqld.log</span><br><span class=\"line\">2018-08-20T08:52:24.328424Z 1 [Note] A temporary password is generated for root@localhost: D&amp;!Uth(Hq4sg</span><br></pre></td></tr></table></figure></p>\n<p>这里给的默认密码是 <code>D&amp;!Uth(Hq4sg</code>，是不是很难操作，所以我们需要设定一个自己习惯且好记的密码。</p>\n<p>修改密码：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# mysql -u root -p</span><br><span class=\"line\">Enter password:</span><br></pre></td></tr></table></figure></p>\n<p>在这里你需要输入Mysql默认安装的密码。也就是<code>D&amp;!Uth(Hq4sg</code>这个。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;xxxx&apos;;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>\n<p>注意你输入的密码格式（默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位）</p>\n<p>第七步：设置允许远程登录</p>\n<p>mysql默认是不允许远程登录的，我们需要设置下，并且防火墙开放3306端口；<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;xxxxx&apos; WITH GRANT OPTION;</span><br><span class=\"line\">Query OK, 0 rows affected, 1 warning (0.01 sec)</span><br><span class=\"line\">mysql&gt; exit;</span><br><span class=\"line\">Bye</span><br></pre></td></tr></table></figure></p>\n<p>xxxxxx代表的就是你上次输入的密码</p>\n<p>开放防火墙的3306端口<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@haloo ~]# firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class=\"line\">success</span><br><span class=\"line\">[root@haloo ~]# firewall-cmd --reload</span><br><span class=\"line\">success</span><br></pre></td></tr></table></figure></p>\n<p>注意，如果你设置的端口号不是3306，那么你你这里的端口需要更改为你设置的端口号。<br>现在就可以通过远程连接管理我们的MYSQL数据库了。</p>\n","prev":{"title":"MYSQL优化","slug":"MYSQL优化"},"next":{"title":"双向链表的实现","slug":"双向链表的实现"},"link":"https://easyhaloo.github.io/post/Centos上安装配置MYSQL/","copyright":true}