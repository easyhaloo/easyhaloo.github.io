{"title":"MYSQL优化","date":"2018-08-23T14:03:17.000Z","slug":"MYSQL优化","tags":["MSYSQL优化"],"categories":["MYSQL"],"updated":"2018-08-23T14:03:49.832Z","content":"<h4 id=\"碎片整理\"><a href=\"#碎片整理\" class=\"headerlink\" title=\"碎片整理\"></a>碎片整理</h4><p>mysql数据一开始是在磁盘上顺序存放的,如果数据表有频繁的update改动，那么就会形很多数据碎片，降低查询效率。</p>\n<ul>\n<li><p>重新改变引擎，mysql重新整理数据</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alter table user engine innodb;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>optimize</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">optimize table user</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h4 id=\"min-max优化\"><a href=\"#min-max优化\" class=\"headerlink\" title=\"min,max优化\"></a>min,max优化</h4><pre><code>select min(age) from table where status=1;\n</code></pre><p>这条语句会全表扫描，所有我们可以在<code>age</code>字段上建立索引，然后更改语句。</p>\n<pre><code>select min(age) from table use index(age) where status=1 limit 1;\n</code></pre><h4 id=\"count优化\"><a href=\"#count优化\" class=\"headerlink\" title=\"count优化\"></a>count优化</h4><pre><code>select count(*) from table;\n</code></pre><p>通过explain可以看出已经被mysql优化到常亮级别了；非常快    </p>\n<pre><code>select count(*) from table where id&gt;100;\n</code></pre><p>扫描前100行数据是十分快的，但是扫描100行后的数据，随着数据量的庞大会降低查询速度。</p>\n<pre><code>( select count(*) from table ) - ( select  count(*) from table where id&lt;100 )\n</code></pre><h4 id=\"union\"><a href=\"#union\" class=\"headerlink\" title=\"union\"></a>union</h4><p>连接查询结果的时候 如非必要 尽量使用 union all，因为union all 不过滤数据，效率高，而union要过滤数据，代价很大；</p>\n","prev":{"title":"JavaScript深入浅出(一)","slug":"JavaScript深入浅出-一"},"next":{"title":"Centos上安装配置MYSQL","slug":"Centos上安装配置MYSQL"},"link":"https://easyhaloo.github.io/post/MYSQL优化/","copyright":true}